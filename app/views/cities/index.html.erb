<% unless notice.blank? %>
  <div class="alert alert-success" role="alert">
    <%= notice %>
  </div>
<% end %>
<h1 class="text-center">Cidades</h1>
<%= form_with(model:@city, url: "/cities/search", method: :get) do |form| %>
  <%= form.fields_for :city do |city_fields| %>
    <div class="row g-3">
      <div class="col">
        <%= city_fields.label :name, "Selecione o estado:" %>
        <%= city_fields.collection_select(:states_id, states, :id, :name, prompt: "Selecione") %>
      </div>
      <div class="col">
        <%= city_fields.text_field :name, placeholder: "Digite o nome da cidade aqui." %>
        <%= city_fields.submit "Buscar" %>
      </div>
    </div>
  <% end %>
<% end %>
<%= link_to "Criar cidade", new_city_path %>
<div class="" id="cities">
  <% if @cities.length > 0 %>
    <%= will_paginate @cities %>
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Cidade</th>
          <th scope="col">Estado</th>
          <th scope="col">AÃ§Ãµes</th>
        </tr>
      </thead>
      <tbody>
        <% @cities.each do |city| %>
          <tr>
            <td><%= city.name %></td>
            <td><%= city.state %></td>
            <td>
              <%= link_to 'Exibir', city, type:"button", class:"btn btn-info btn-sm bi bi-eye-fill" %>
              <%= link_to 'Editar', edit_city_path(city), type:"button", class:"btn btn-info btn-sm bi bi-pencil-fill" %>
              <%= button_to 'Excluir', city, method: :delete, type:"button", class:"btn btn-info btn-sm bi bi-trash" %>
            </td>
          </tr>
        <% end %>
      <% else%>
        <tr>
          <td colspan="3">Nenhuma cidade encontrada.</td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= will_paginate @cities %>
</div>
